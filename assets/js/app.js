!function(){var SL;SL=window.SpencerLevine||(window.SpencerLevine={});SL.Views={};SL.App={init:function(){this.appModel=new Backbone.Model;return this.extendViews()},extendViews:function(){var _this=this;return _.each($(".js-extend-view"),function(el){var $el,v,view,viewName;$el=$(el);viewName=$el.data("view");if(viewName===null||viewName===void 0){return}view=SL.Views[viewName];v=new view({el:el});return $el.removeClass("js-extend-view")})}};SL.Views.PreloaderView=Backbone.View.extend({initialize:function(){_.bindAll(this);this.$el=$(this.el);return _.delay(this.remove,600)}});SL.Views.ProjectView=Backbone.View.extend({initialize:function(){var $content;_.bindAll(this);this.$el=$(this.el);this.$el.append('<table cellpadding="0" cellspacing="0" cellpadding="0"><tr></tr></table>');_.each(this.$("img"),this.fixImage);$content=this.$(".content");$content.wrap('<td class="description"></td>');$content=$content.parents(".description");return $(this.$(".image")[0]).after($content)},fixImage:function(el){var $el;$el=$(el);$el.wrap('<td class="image"></td>');$el=$el.parents(".image");return this.$("tr").append($el)}});SL.Views.PyramidView=Backbone.View.extend({width:120,height:95,initialize:function(){var _this=this;_.bindAll(this);this.$el=$(this.el);this.updateVariables();this.render();return;$(document).bind("resize",this.updateVariables);$(document).bind("mousemove",this.updateEye);return $(document).bind("touchmove",function(e){var touch;touch=e.originalEvent.changedTouches[0];_this.updateEye({clientX:touch.pageX,clientY:touch.pageY});return false})},updateVariables:function(){this.screenW=$(window).width();return this.screenH=$(window).height()},render:function(){var eye_bg,gloss,_this=this;Two.Resolution=24;this.two=new Two({width:this.width,height:this.height});this.two.appendTo(document.getElementById("pyramid"));this.pyramid=this.two.makePolygon(this.width/2,0,this.width,this.height,0,this.height,false);this.pyramid.fill="rgb(247, 237, 16)";this.pyramid.noStroke();eye_bg=this.two.makeCircle(60,58,22);eye_bg.fill="#FFF";eye_bg.noStroke();this.pupil=this.two.makeCircle(66,65,9);this.pupil.fill="#000";this.pupil.noStroke();this.pupil.destination=new Two.Vector;this.pupil.bind("update",function(){console.log("update pupil");_this.pupil.translation.x+=(_this.pupil.destination.x-_this.pupil.translation.x)*.625;return _this.pupil.translation.y+=(_this.pupil.destination.y-_this.pupil.translation.y)*.625});gloss=this.two.makeCircle(60,52,13);gloss.fill="#FFF";gloss.opacity=.4;gloss.noStroke();return this.two.update()},updateEye:function(e){var center,distance,mouse,pct,radius,rect,theta,x,y;mouse=new Two.Vector(e.clientX,e.clientY);rect={left:16,top:16,width:120,height:95};center={x:rect.left+rect.width/2,y:rect.top+rect.height/2};theta=Math.atan2(mouse.y-center.y,mouse.x-center.x);distance=mouse.distanceTo(center);pct=distance/this.screenW;radius=75*pct;this.pupil.destination.set(radius*Math.cos(theta),radius*Math.sin(theta));this.two.update();return;x=e.pageX;y=e.pageY;this.pupil.translation.x=30;this.pupil.translation.y=30;return this.two.update()}})}.call(this);